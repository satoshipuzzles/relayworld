<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Relay World</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen">
        <div class="login-panel">
            <h1>Relay World</h1>
            <p>Join the Nostr relay battlefield!</p>
            <button id="login-button" class="btn btn-primary">Login with Nostr</button>
            <div id="login-status"></div>
            <div class="loader" id="login-loader"></div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-container" class="screen" style="display:none;">
        <canvas id="game-canvas"></canvas>
        <div id="ui-container">
            <!-- All previous UI elements remain the same -->
        </div>
    </div>

    <!-- Bitcoin Connect Modal -->
    <div id="bitcoin-connect-modal" class="screen">
        <div class="bc-modal-content">
            <div class="bc-modal-header">
                <h3 class="bc-modal-title">Connect Wallet</h3>
                <button id="bc-modal-close" class="btn btn-close">Ã—</button>
            </div>
            <div class="bc-connector-list">
                <div class="bc-connector" data-connector="Alby">
                    <img class="bc-connector-icon" src="https://via.placeholder.com/30" alt="Alby">
                    <div class="bc-connector-name">Alby</div>
                </div>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://unpkg.com/nostr-tools@1.7.5/lib/nostr.bundle.js"></script>

    <!-- Load scripts in correct order -->
    <script>
        // Temporary configuration placeholder
        window.CONFIG = {
            GAME_RELAY: "wss://relay.nostrfreaks.com",
            DEFAULT_RELAYS: [
                "wss://relay.damus.io", 
                "wss://nostr-pub.wellorder.net", 
                "wss://relay.snort.social"
            ],
            EVENT_KINDS: {
                PLAYER_POSITION: 420001,
                GLOBAL_CHAT: 420002,
                // ... other event kinds
            }
        };
    </script>
    
    <!-- Application Scripts -->
    <script src="js/nostr.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/config.js"></script>
    <script src="js/player.js"></script>
    <script src="js/world.js"></script>
    <script src="js/social.js"></script>
    <script src="js/economy.js"></script>
    <script src="js/quests.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
    <script src="js/sdk.js"></script>
</body>
</html>
